<% if current_user.try(:admin?) %>
  <h1>Events_admin</h1>
<% else %>
  <h1>Events</h1>
<% end %>

<%= search_form_for @search do |f| %>
  <%= f.label :title_cont, "タイトル" %>
  <%= f.search_field :title_cont %>

  <%= f.label :content_cont, "内容" %>
  <%= f.search_field :content_cont %>

  <%= f.label :user_name_cont, "投稿ユーザ" %>
  <%= f.search_field :user_name_cont %>

  <div class="actions"><%= f.submit "検索" %></div>
  <%= link_to 'クリア', request.path %>
<% end %>

  <a class='dropdown-trigger btn' href='#' data-target='dropdown1'>ソートする</a>

  <ul id='dropdown1' class='dropdown-content'>
    <li><%= sort_link(@search, :title,  [:title, 'created_at desc'], "タイトルで並び替える", hide_indicator: true) %></li>
    <li><%= sort_link(@search, :content,  [:content, 'created_at desc'], "内容で並び替える", hide_indicator: true) %></li>
  </ul>

<table>
  <thead>
    <tr>
      <th><%= sort_link(@search, :title,  [:title, 'created_at desc']) %></th>
      <th><%= sort_link(@search, :content,  [:content, 'created_at desc']) %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @events.each do |event| %>
      <tr>
        <td><%= event.title %></td>
        <td><%= event.content %></td>
        <td><%= link_to 'Show', event %></td>
        <td><%= link_to 'Edit', edit_event_path(event) %></td>
        <td><%= link_to 'Destroy', event, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @events %>
<%= page_entries_info @events %>
<br>

<%= link_to 'New Event', new_event_path %>
